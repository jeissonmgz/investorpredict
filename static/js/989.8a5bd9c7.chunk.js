"use strict";(self.webpackChunkfuture_coin=self.webpackChunkfuture_coin||[]).push([[989],{989:(e,i,a)=>{a.r(i),a.d(i,{default:()=>p});var t=a(43),n=a(84),s=a(216),o=a(463),c=a(334);var r=a(178),l=a(579);const d=e=>{let{coinValues:i,historyPrediction:a}=e;const[s,o]=(0,t.useState)(),c=(0,t.useMemo)((()=>["#F272A1","#6D5DA6","#232B59","#60BFBF","#F2958D","#593E25"]),[]),d=i[i.length-1];return(0,t.useEffect)((()=>{o({name:"Posibles pron\xf3sticos",labels:a.days,datasets:a.predictions.map(((e,i)=>({name:"".concat(50+e.reliability/2,"%"),backgroundColor:c[i],borderColor:c[i],values:e.values})))})}),[a,c]),(0,l.jsxs)("div",{className:"estimation_coin",children:[(0,l.jsx)("h2",{className:"estimation_coin__title",children:"Pron\xf3stico"}),(0,l.jsx)("div",{className:"estimation_coin__text",children:"A continuaci\xf3n, te presentamos posibles valores para los pr\xf3ximos 7 d\xedas, con distintos m\xe9todos, cada m\xe9todo tiene un margen de confiabilidad:"}),(0,l.jsx)("div",{className:"estimation_coin__text",children:(0,l.jsxs)("span",{className:"estimation_coin__badge",children:["Valor hoy $",d.toFixed(2)," USD"]})}),(0,l.jsx)(n.Zp,{children:(0,l.jsx)(l.Fragment,{children:s&&(0,l.jsx)(r.f,{...s})})}),(0,l.jsx)("div",{className:"estimation_coin__container",children:(0,l.jsxs)("table",{className:"estimation_coin__table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"M\xe9todo"}),(0,l.jsx)("th",{children:"Confiabilidad"}),a.days.map((e=>(0,l.jsx)("th",{children:e},e)))]})}),(0,l.jsx)("tbody",{children:a.predictions.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.nameMethod}),(0,l.jsxs)("td",{children:[50+e.reliability/2,"%"]}),e.values.map(((i,a)=>(0,l.jsx)("td",{children:i},"".concat(e.nameMethod).concat(i).concat(a))))]},e.nameMethod)))})]})})]})},m=e=>{let{coinTime:i}=e;const[a,n]=(0,t.useState)();return(0,t.useEffect)((()=>{(e=>{if(e){const i=e.map((e=>e.day));n({name:"Variaci\xf3n en el mercado",labels:i,datasets:[{name:"USD",backgroundColor:"#3DF29D",borderColor:"#3DF29D",values:e.map((e=>e.value))}]})}})(i)}),[i]),(0,l.jsx)(l.Fragment,{children:a&&(0,l.jsx)(r.f,{...a})})},p=()=>{const{coin:e}=(()=>{const[e,i]=(0,t.useState)(),{coinId:a}=(0,s.g)(),n=(0,s.Zp)(),r=(0,t.useCallback)((async()=>{try{const e=await c.b.getCoinPredictionInUSDUseCase(a);i(e)}catch(e){n("/".concat(o.c.urlBase,"no_encontrado"))}}),[n,a]);return(0,t.useEffect)((()=>{void 0!==a&&a!==(null===e||void 0===e?void 0:e.id)&&r()}),[a,null===e||void 0===e?void 0:e.id,r]),{coin:e}})();return(0,l.jsxs)("div",{className:"coin_page",children:[(0,l.jsxs)("div",{className:"coin_page__header_history",children:[(0,l.jsxs)("header",{className:"coin_page__header",children:[(0,l.jsx)(n.pK,{type:"secundary",to:"?search=".concat(null===e||void 0===e?void 0:e.name),children:"Volver"}),(0,l.jsxs)("div",{className:"coin_page__title",children:[(0,l.jsx)("img",{className:"coin_page__title_image",src:null===e||void 0===e?void 0:e.image,alt:"logo coin"}),(0,l.jsx)("h1",{className:"coin_page__title_text",children:null===e||void 0===e?void 0:e.name})]})]}),(0,l.jsx)("section",{className:"coin_page__history center_xy",children:(0,l.jsx)(n.Zp,{children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{className:"coin_page__subtitle",children:"Historial"}),"El historial de los \xfaltimos 90 d\xedas es:",(null===e||void 0===e?void 0:e.pricesLastDaysInUSD)&&(0,l.jsx)(m,{coinTime:e.pricesLastDaysInUSD})]})})})]}),(null===e||void 0===e?void 0:e.pricesLastDaysInUSD)&&e.predictionsInUSD&&(0,l.jsx)(d,{coinValues:e.pricesLastDaysInUSD.map((e=>e.value)),historyPrediction:e.predictionsInUSD}),(0,l.jsx)("footer",{className:"coin_page__footer",children:(0,l.jsx)(n.pK,{type:"secundary",to:"?search=".concat(null===e||void 0===e?void 0:e.name),children:"Busca m\xe1s criptomonedas"})})]})}},334:(e,i,a)=>{a.d(i,{b:()=>h});var t=a(463);const n=e=>fetch(e).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})),s={getCoins:async()=>{const e=n("".concat(t.c.urlApi,"/coins/list"));return(await e).map((e=>e))},getCoinDetail:async e=>{const i=await n("".concat(t.c.urlApi,"/coins/").concat(e,"?localization=true&tickers=false&market_data=false&community_data=false&developer_data=false&sparkline=false"));return{id:i.id,name:i.name,symbol:i.symbol,image:i.image.large}},getCoinValuesInUSD:async e=>(await n("".concat(t.c.urlApi,"/coins/").concat(e,"/market_chart?vs_currency=usd&days=90&interval=daily"))).prices.map((e=>({day:new Date(e[0]).toLocaleDateString(),value:e[1]})))};var o=a(177),c=a.n(o),r=a(797),l=a.n(r);const d=(e,i,a,t)=>new Promise((n=>{const s=t(a.map(((e,i)=>[i,e])));n({nameMethod:e,values:i.map(((e,i)=>s.predict(i))).map((e=>e[1])),reliability:100*s.r2})})),m=e=>e.filter((e=>!isNaN(e.reliability))),p=e=>{let{coinRepository:i,predictionRepository:a}=e;return async e=>{const t=await i.getCoinDetail(e);t.pricesLastDaysInUSD=await i.getCoinValuesInUSD(e);const n=t.pricesLastDaysInUSD.map((e=>e.value)),s=a.getDays(7),o=await Promise.all([a.getLinearPrediction(s,n),a.getExponentialPrediction(s,n),a.getLogarithmicPrediction(s,n),a.getPowerPrediction(s,n),a.getPolynomialPrediction(s,n)]);return t.predictionsInUSD={days:s,predictions:m(o)},t}},h={getCoinsUseCase:(e=>{let{coinRepository:i}=e;return()=>i.getCoins()})(u={coinRepository:s,predictionRepository:{getDays:e=>{let i=[];for(let a=1;a<=e;a++)i=[...i,l()().add(a,"days").format("DD/MM/YYYY")];return i},getLinearPrediction:(e,i)=>d("lineal",e,i,c().linear),getExponentialPrediction:(e,i)=>d("exponencial",e,i,c().exponential),getLogarithmicPrediction:(e,i)=>d("logaritmico",e,i,c().logarithmic),getPowerPrediction:(e,i)=>d("potencial",e,i,c().power),getPolynomialPrediction:(e,i)=>d("polinomial",e,i,c().polynomial)}}),getCoinPredictionInUSDUseCase:p(u),findCoinUseCase:(e,i)=>e.length>0?i.filter((i=>i.name.toLowerCase().startsWith(e.toLowerCase()))):[]};var u}}]);
//# sourceMappingURL=989.8a5bd9c7.chunk.js.map